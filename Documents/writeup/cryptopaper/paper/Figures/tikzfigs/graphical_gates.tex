%!TEX root = ../../main.tex

\begin{figure}[t]
\centering
\begin{tikzpicture}
    \begin{scope}[shift={(-6,0)}]
       \node [draw,trapezium,minimum height=1.48cm,trapezium left angle=75,trapezium right angle=75, rotate=90] {\rotatebox{-90}{$\mat{A}$}};
        \node[shift={(0,-1.5)}] {Expanding $\LMap^\mat{A}_p$ gate};
        \node[shift={(-1,0)}] {$x$};
        \node[shift={(1,0)}] {$y$};

       \node [draw,trapezium,minimum height=1.48cm,trapezium left angle=75,trapezium right angle=75, rotate=-90, shift={(3.5,0)}] {\rotatebox{90}{$\mat{A}$}};
        \node[shift={(0,-5)}] {Contracting $\LMap^\mat{A}_p$ gate};
        \node[shift={(-1,-3.5)}] {$x$};
        \node[shift={(1,-3.5)}] {$y$};

    \end{scope}
    \begin{scope}[shift={(0,0)}]
        \draw (-0.74,0.65) -- (0.74,1.05) -- (0.74,-1.05) -- (-0.74,-0.65) -- (-0.74,-0.55) -- (0.5,-0.55) -- (0.5,0.55) -- (-0.74,0.55) -- cycle;
         \draw (-0.8,0.65) node[left] {$\mat{K}$};
         \draw (-0.8,-0.65) node[left] {$x$};
        \node[shift={(0,-1.5)}] {Expanding $\BLMap_p$ gate};
        \node[shift={(1,0)}] {$y$};
    \end{scope}
    \begin{scope}[shift={(0,-3.5)}]
        \draw (-0.74,1.05) -- (0.74,0.65) -- (0.74,-0.65) -- (-0.74,-1.05) -- (-0.74,-0.55) -- (0.5,-0.55) -- (0.5,0.55) -- (-0.74,0.55) -- cycle;
         \draw (-0.8,0.8) node[left] {$\mat{K}$};
         \draw (-0.8,-0.8) node[left] {$x$};
        \node[shift={(0,-1.5)}] {Contracting $\BLMap_p$ gate};
        \node[shift={(1,0)}] {$y$};        
    \end{scope}

    \begin{scope}[shift={(6,0)}]
    \tikzmath{\sidelen=0.6;\maxnum=4;}
    \foreach \num in {0,...,\maxnum} {
        \tikzmath{\yshift=(\num-(\maxnum)/2)*(\sidelen + 0.3);}
        \node [draw,regular polygon, regular polygon sides=3,scale=0.5,shift={(0,\yshift)},rotate=90] {};
    }
    \node[shift={(0,-1.5)}] {$\Convert_{(2,3)}$ gate};
    \foreach \num in {0,...,\maxnum} {
        \tikzmath{\yshift=(\num-(\maxnum)/2)*(\sidelen + 0.3);}
        \node [draw,regular polygon, regular polygon sides=3,scale=0.5,shift={(0,\yshift-7)},rotate=-90] {};
    }
    \node[shift={(0,-5)}] {$\Convert_{(3,2)}$ gate};

    \end{scope} 

    \begin{scope}[shift={(-7,-6)}]
       \node [draw=none,regular polygon, regular polygon sides=4, scale=2, fill=blue!15] {};
       \node[shift={(1,0)}] {$p=2$};
       \node [draw=none,regular polygon, regular polygon sides=4, scale=2, pattern=north west lines, pattern color=orange!70, shift={(1.5,0)}] {};
        \node[shift={(4,0)}] {$p=3$};
    \end{scope}
\end{tikzpicture}

\caption{Pictorial representations of the circuit gates. For the linear and bilinear gates, expanding means that the output vector is larger than the input vector, while contracting means that the output vector is smaller than the input vector. Additionally, for $p=2$, the gates are shaded in violet, and for $p=3$, the gates contain diagonal orange lines.}
\label{fig:graphical_gates}
\end{figure}